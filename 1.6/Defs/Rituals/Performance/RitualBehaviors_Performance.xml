<?xml version="1.0" encoding="utf-8" ?>
<Defs>
	
	<RitualBehaviorDef>
		<defName>NikolaisIdeology_PerformanceRitualBehavior</defName>
		<durationTicks>6000</durationTicks>
		<workerClass>NikolaisIdeology_GenderWorks.RitualBehaviorWorker_Performance</workerClass>
		<roles>
			<li Class="RitualRoleTag">
				<label>performer</label>
				<id>performer</id>
				<required>True</required>
				<precept>NikolaisIdeology_IdeoRole_Idol</precept>
				<substitutable>True</substitutable>
				<maxCount>1</maxCount>
				<countsAsParticipant>False</countsAsParticipant>
				<allowChild>false</allowChild>
				<mustBeAbleToReachTarget>True</mustBeAbleToReachTarget>
			</li>
		</roles>
		<spectatorsLabel>Spectators</spectatorsLabel>
		<spectatorGerund>spectate</spectatorGerund>
		<stages>
			<li>
				<defaultDuty>Spectate</defaultDuty>
				<essential>True</essential>
				<allowedSpectateSidesOverride>Vertical</allowedSpectateSidesOverride>
				<spectateDistanceOverride>1</spectateDistanceOverride>
				<spectatorsRequired>true</spectatorsRequired>
				<endTriggers>
					<li Class="StageEndTrigger_DurationPercentage">
						<percentage>1</percentage>
					</li>
				</endTriggers>
				<failTriggers>
					<li Class="StageFailTrigger_PawnAsleep">
						<desc>performer asleep</desc>
						<pawnId>performer</pawnId>
					</li>
				</failTriggers>
				<roleBehaviors>
					<li>
						<roleId>performer</roleId>
						<dutyDef>PerformanceDance</dutyDef>
						<customPositions>
							<li Class="RitualPosition_BesideThing" />
						</customPositions>
					</li>
				</roleBehaviors>
			</li>
		</stages>
	</RitualBehaviorDef>
	<DutyDef>
		<defName>PerformanceDance</defName>
		<label>performance</label>
		<hook>MediumPriority</hook>
		<thinkNode Class="ThinkNode_Priority">
			<subNodes>
				<li Class="ThinkNode_ConditionalInGatheringArea">
					<subNodes>

						<!-- Stand where you are and do dance moves -->
						<li Class="ThinkNode_ConditionalRandom">
							<chance>0.4</chance>
							<subNodes>
								<li Class="JobGiver_Dance">
									<ticksRange>480</ticksRange>
								</li>
							</subNodes>
						</li>

						<!-- Get joy -->
						<li Class="ThinkNode_ConditionalRandom">
							<chance>0.1</chance>
							<subNodes>
								<li Class="JobGiver_GetJoyInGatheringArea">
									<desiredRadius>8</desiredRadius>
								</li>
							</subNodes>
						</li>

						<!-- Wander -->
						<li Class="JobGiver_WanderInGatheringArea">
							<ticksBetweenWandersRange>50</ticksBetweenWandersRange>
							<desiredRadius>3</desiredRadius>
						</li>
					</subNodes>
				</li>

				<!-- Reach the party area -->
				<li Class="JobGiver_WanderInGatheringArea">
					<ticksBetweenWandersRange>50~250</ticksBetweenWandersRange>
					<locomotionUrgency>Jog</locomotionUrgency>
					<desiredRadius>3</desiredRadius>
				</li>
			</subNodes>
		</thinkNode>
	</DutyDef>

</Defs>